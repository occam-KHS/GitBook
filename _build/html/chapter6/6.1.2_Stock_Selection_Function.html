
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>해결책 테스트 &#8212; 나만의 추천 시스템</title>
    
  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=1999514e3f237ded88cf" rel="stylesheet">
<link href="../_static/styles/pydata-sphinx-theme.css?digest=1999514e3f237ded88cf" rel="stylesheet">

    
  <link rel="stylesheet"
    href="../_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" href="../_static/styles/sphinx-book-theme.css?digest=62ba249389abaaa9ffc34bf36a076bdc1d65ee18" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/mystnb.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="../_static/design-style.b7bb847fb20b106c3d81b95245e65545.min.css" />
    
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=1999514e3f237ded88cf">

    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/clipboard.min.js"></script>
    <script src="../_static/copybutton.js"></script>
    <script src="../_static/scripts/sphinx-book-theme.js?digest=f31d14ad54b65d19161ba51d4ffff3a77ae00456"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../_static/togglebutton.js"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    <script src="../_static/design-tabs.js"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"
const thebe_selector = ".thebe,.cell"
const thebe_selector_input = "pre"
const thebe_selector_output = ".output, .cell_output"
</script>
    <script async="async" src="../_static/sphinx-thebe.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="익절/손절 라인" href="6.2.1_Profit_Loss_Sell.html" />
    <link rel="prev" title="종목 추천 프로세스" href="6.1.1_Stock_Selection.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="None">
    

    <!-- Google Analytics -->
    
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="60">
<!-- Checkboxes to toggle the left sidebar -->
<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation" aria-label="Toggle navigation sidebar">
<label class="overlay overlay-navbar" for="__navigation">
    <div class="visually-hidden">Toggle navigation sidebar</div>
</label>
<!-- Checkboxes to toggle the in-page toc -->
<input type="checkbox" class="sidebar-toggle" name="__page-toc" id="__page-toc" aria-label="Toggle in-page Table of Contents">
<label class="overlay overlay-pagetoc" for="__page-toc">
    <div class="visually-hidden">Toggle in-page Table of Contents</div>
</label>
<!-- Headers at the top -->
<div class="announcement header-item noprint"></div>
<div class="header header-item noprint"></div>

    
    <div class="container-fluid" id="banner"></div>

    

    <div class="container-xl">
      <div class="row">
          
<!-- Sidebar -->
<div class="bd-sidebar noprint" id="site-navigation">
    <div class="bd-sidebar__content">
        <div class="bd-sidebar__top"><div class="navbar-brand-box">
    <a class="navbar-brand text-wrap" href="../index.html">
      
        <!-- `logo` is deprecated in Sphinx 4.0, so remove this when we stop supporting 3 -->
        
      
      
      <img src="../_static/logo.png" class="logo" alt="logo">
      
      
      <h1 class="site-logo" id="site-title">나만의 추천 시스템</h1>
      
    </a>
</div><form class="bd-search d-flex align-items-center" action="../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search this book..." aria-label="Search this book..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="../intro.html">
                    나만의 추천 시스템
                </a>
            </li>
        </ul>
        <p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  chapter 1
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../chapter1/1.1.0_SOP.html">
   <strong>
    책을 시작하면서
   </strong>
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../chapter1/1.2.0_Data_Science.html">
   데이터분석 환경의 변화
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  chapter 2
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../chapter2/2.1.0_Python_Basics.html">
   <strong>
    파이썬 데이터분석 기초
   </strong>
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" type="checkbox"/>
  <label for="toctree-checkbox-1">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../chapter2/2.1.1_Python_Basics.html">
     Data Type
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../chapter2/2.1.2_Python_Basics.html">
     Index
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../chapter2/2.1.3_Python_Basics.html">
     For Loop
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../chapter2/2.1.4_Python_Basics.html">
     If Condition
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../chapter2/2.1.5_Python_Basics.html">
     Functions
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../chapter2/2.2.0_Useful_Techniques.html">
   <strong>
    유용한 기능들
   </strong>
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" type="checkbox"/>
  <label for="toctree-checkbox-2">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../chapter2/2.2.1_Useful_Techniques.html">
     Append
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../chapter2/2.2.2_Useful_Techniques.html">
     Concat 과 Merge
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../chapter2/2.2.3_Useful_Techniques.html">
     Groupby
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../chapter2/2.2.4_Useful_Techniques.html">
     Resample
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../chapter2/2.2.5_Useful_Techniques.html">
     Pickle
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../chapter2/2.2.6_Useful_Techniques.html">
     Shift
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../chapter2/2.2.7_Useful_Techniques.html">
     Rolling
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../chapter2/2.3.0_Visualization.html">
   <strong>
    시각화
   </strong>
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" type="checkbox"/>
  <label for="toctree-checkbox-3">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../chapter2/2.3.1_Visualization.html">
     Pandas Plot
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../chapter2/2.3.2_Visualization.html">
     Matplotlib
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../chapter2/2.4.1_Volatility_Breakout.html">
   <strong>
    변동성 돌파전략 구현
   </strong>
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  chapter 3
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../chapter3/3.1.0_Use_Case.html">
   <strong>
    데이터분석 활용사례
   </strong>
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" type="checkbox"/>
  <label for="toctree-checkbox-4">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../chapter3/3.1.1_Use_Case.html">
     보험사 사례
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../chapter3/3.1.2_Use_Case.html">
     신용카드사 사례
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../chapter3/3.1.3_Use_Case.html">
     소매업 사례
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../chapter3/3.1.4_Use_Case.html">
     제조업 사례 (난이도 상)
    </a>
   </li>
  </ul>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  chapter 4
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../chapter4/4.0.0_My_Strategy.html">
   <strong>
    데이터분석으로 나만의 전략 만들기
   </strong>
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../chapter4/4.1.0_My_Strategy.html">
   <strong>
    문제점 파악
   </strong>
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../chapter4/4.2.0_My_Strategy.html">
   <strong>
    정보 수집 및 전문가 인터뷰
   </strong>
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../chapter4/4.3.0_My_Strategy.html">
   <strong>
    가설 설정
   </strong>
  </a>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../chapter4/4.4.0_Data_Collection.html">
   <strong>
    데이터 수집 및 분석
   </strong>
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-5" name="toctree-checkbox-5" type="checkbox"/>
  <label for="toctree-checkbox-5">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../chapter4/4.4.1_Data_Collection.html">
     FinanceDataReader 로 일봉 데이터 가져오기
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../chapter4/4.4.2_Data_Collection.html">
     코스닥 인덱스 데이터
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../chapter4/4.4.3_Data_Collection.html">
     종목별 일봉 데이터와 코스피 지수 데이터와 결합
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../chapter4/4.4.4_Data_Processing.html">
     가설 검증을 위한 데이터 처리
    </a>
   </li>
  </ul>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  chapter 5
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../chapter5/5.1.0_Hypothesis.html">
   <strong>
    가설 검정
   </strong>
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-6" name="toctree-checkbox-6" type="checkbox"/>
  <label for="toctree-checkbox-6">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../chapter5/5.1.1_Hypothesis_1.html">
     가격 변동성이 크고 거래량이 몰린 종목이 주가가 상승한다.
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../chapter5/5.1.2_Hypothesis_2.html">
     5일 이동 평균선이 오늘 종가보다 위에 위치해 있다.
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../chapter5/5.1.3_Hypothesis_3.html">
     위 꼬리가 긴 양봉이 자주 발생한다.
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../chapter5/5.1.4_Hypothesis_4.html">
     거래량이 종종 터지며, 매집의 흔적을 보인다.
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../chapter5/5.1.5_Hypothesis_5.html">
     주가지수보다 더 좋은 수익율을 자주 보여준다.
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../chapter5/5.1.6_Hypothesis_6.html">
     동종업계 평균 수익률보다 더 좋은 수익률을 보여준다.
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../chapter5/5.2.0_Solution_Details.html">
   <strong>
    해결책 개발
   </strong>
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-7" name="toctree-checkbox-7" type="checkbox"/>
  <label for="toctree-checkbox-7">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../chapter5/5.2.1_Feature_Engineering.html">
     피처 엔지니어링
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../chapter5/5.2.2_Modeling_Library.html">
     모델링 라이브러리 소개
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../chapter5/5.2.3_GAM.html">
     종목 선정 모델 개발
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../chapter5/5.2.4_LM_Assumptions.html">
     선형모델 가정에 대한 이해
    </a>
   </li>
  </ul>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  chapter 6
 </span>
</p>
<ul class="current nav bd-sidenav">
 <li class="toctree-l1 current active has-children">
  <a class="reference internal" href="6.0.0_Effectiveness_Testing.html">
   <strong>
    해결책의 효과 측정
   </strong>
  </a>
  <input checked="" class="toctree-checkbox" id="toctree-checkbox-8" name="toctree-checkbox-8" type="checkbox"/>
  <label for="toctree-checkbox-8">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul class="current">
   <li class="toctree-l2">
    <a class="reference internal" href="6.1.1_Stock_Selection.html">
     종목 추천 프로세스
    </a>
   </li>
   <li class="toctree-l2 current active">
    <a class="current reference internal" href="#">
     해결책 테스트
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="6.2.1_Profit_Loss_Sell.html">
   익절/손절 라인
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  chapter 7
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../chapter7/7.0.0_Algo_Trading.html">
   <strong>
    자동매매를 해보자
   </strong>
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  chapter 8
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../chapter8/8.0.0_Web_Application.html">
   <strong>
    WebApp을 만들어보자
   </strong>
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  chapter 9
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../chapter9/9.0.0_POC.html">
   <strong>
    계좌인증
   </strong>
  </a>
 </li>
</ul>

    </div>
</nav></div>
        <div class="bd-sidebar__bottom">
             <!-- To handle the deprecated key -->
            
            <div class="navbar_extra_footer">
            Powered by <a href="https://jupyterbook.org">Jupyter Book</a>
            </div>
            
        </div>
    </div>
    <div id="rtd-footer-container"></div>
</div>


          


          
<!-- A tiny helper pixel to detect if we've scrolled -->
<div class="sbt-scroll-pixel-helper"></div>
<!-- Main content -->
<div class="col py-0 content-container">
    
    <div class="header-article row sticky-top noprint">
        



<div class="col py-1 d-flex header-article-main">
    <div class="header-article__left">
        
        <label for="__navigation"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="right"
title="Toggle navigation"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-bars"></i>
  </span>

</label>

        
    </div>
    <div class="header-article__right">
<div class="menu-dropdown menu-dropdown-launch-buttons">
  <button class="headerbtn menu-dropdown__trigger"
      aria-label="Launch interactive content">
      <i class="fas fa-rocket"></i>
  </button>
  <div class="menu-dropdown__content">
    <ul>
      <li>
        <a href="https://mybinder.org/v2/gh/occam-KHS/JupyterBook.git/master?urlpath=tree/docs/chapter6/6.1.2_Stock_Selection_Function.ipynb"
   class="headerbtn"
   data-toggle="tooltip"
data-placement="left"
title="Launch on Binder"
>
  

<span class="headerbtn__icon-container">
  
    <img src="../_static/images/logo_binder.svg">
  </span>
<span class="headerbtn__text-container">Binder</span>
</a>

      </li>
      
    </ul>
  </div>
</div>

<button onclick="toggleFullScreen()"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="bottom"
title="Fullscreen mode"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>

<div class="menu-dropdown menu-dropdown-repository-buttons">
  <button class="headerbtn menu-dropdown__trigger"
      aria-label="Source repositories">
      <i class="fab fa-github"></i>
  </button>
  <div class="menu-dropdown__content">
    <ul>
      <li>
        <a href="https://github.com/occam-KHS/JupyterBook.git"
   class="headerbtn"
   data-toggle="tooltip"
data-placement="left"
title="Source repository"
>
  

<span class="headerbtn__icon-container">
  <i class="fab fa-github"></i>
  </span>
<span class="headerbtn__text-container">repository</span>
</a>

      </li>
      
      <li>
        <a href="https://github.com/occam-KHS/JupyterBook.git/issues/new?title=Issue%20on%20page%20%2Fchapter6/6.1.2_Stock_Selection_Function.html&body=Your%20issue%20content%20here."
   class="headerbtn"
   data-toggle="tooltip"
data-placement="left"
title="Open an issue"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-lightbulb"></i>
  </span>
<span class="headerbtn__text-container">open issue</span>
</a>

      </li>
      
    </ul>
  </div>
</div>

<div class="menu-dropdown menu-dropdown-download-buttons">
  <button class="headerbtn menu-dropdown__trigger"
      aria-label="Download this page">
      <i class="fas fa-download"></i>
  </button>
  <div class="menu-dropdown__content">
    <ul>
      <li>
        <a href="../_sources/chapter6/6.1.2_Stock_Selection_Function.ipynb"
   class="headerbtn"
   data-toggle="tooltip"
data-placement="left"
title="Download source file"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="headerbtn__text-container">.ipynb</span>
</a>

      </li>
      
      <li>
        
<button onclick="printPdf(this)"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="left"
title="Print to PDF"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="headerbtn__text-container">.pdf</span>
</button>

      </li>
      
    </ul>
  </div>
</div>

    </div>
</div>

<!-- Table of contents -->
<div class="col-md-3 bd-toc show noprint">
</div>
    </div>
    <div class="article row">
        <div class="col pl-md-3 pl-lg-5 content-container">
            <!-- Table of contents that is only displayed when printing the page -->
            <div id="jb-print-docs-body" class="onlyprint">
                <h1>해결책 테스트</h1>
                <!-- Table of contents -->
                <div id="print-main-content">
                    <div id="jb-print-toc">
                        
                    </div>
                </div>
            </div>
            <main id="main-content" role="main">
                
              <div>
                
  <section id="id1">
<h1>해결책 테스트<a class="headerlink" href="#id1" title="Permalink to this headline">#</a></h1>
<p>오늘 날짜만 입력하면 내일 매수할 종목이 추천되도록 함수를 구현합니다. 임의 날짜를 넣어서 테스트 해 봅니다. 이 책에서는 2022년 4월 1일, 2022년 4월 18일,  2022년 5월 2일, 2022년 5월 9일, 2022년 5월 25일,  2022년 6월 2일에 대하여 종목 선정 및 결과 수익률을 테스트 해 보았습니다.  모델을 개발하는데 사용한 날짜는 모델 검증 용도로 적절하지 않습니다. 왜냐하면 개발에서 사용한 데이터는 모델이 좋은 성과가 나오도록 최적화되어 있기 때문입니다.  참고로 모델 개발은 2021년 1월 4일부터 2022년 3월 24일까지 데이터가 사용되었습니다.</p>
<p>이제 종목을 추천하는 프로세스를 완성했습니다. 장 마감 후 종목 추천을 받아 익일 증권사 API  를 이용해서 자동매매를 구현하고 한 달 동안의 수익이 어떤지 검증해 보겠습니다. 홈트레이딩 시스템에도 자동매매가 가능합니다. 책에서 구현할 자동매매는 홈트레이딩 감시 매매 설정으로도 충분히 가능합니다.</p>
<p>실전에서는 HTS 에서 제공하는 예약 매수기능과 매도 감시기능을 이용하는 것리 편리합니다. HTS 를 활용하여 자동으로 매수 매도가 가능합니다.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">FinanceDataReader</span> <span class="k">as</span> <span class="nn">fdr</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="o">%</span><span class="k">matplotlib</span> inline
<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">datetime</span>
<span class="kn">import</span> <span class="nn">pickle</span>
<span class="kn">import</span> <span class="nn">glob</span>
</pre></div>
</div>
</div>
</div>
<p><br> 추전 종목을 만드는 여러 개의 프로세스를 하나의 함수로 만들었습니다.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">select_stocks</span><span class="p">(</span><span class="n">today_dt</span><span class="p">):</span>
    
    <span class="n">today</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="o">.</span><span class="n">strptime</span><span class="p">(</span><span class="n">today_dt</span><span class="p">,</span> <span class="s1">&#39;%Y-%m-</span><span class="si">%d</span><span class="s1">&#39;</span><span class="p">)</span>
    <span class="n">start_dt</span> <span class="o">=</span> <span class="n">today</span> <span class="o">-</span> <span class="n">datetime</span><span class="o">.</span><span class="n">timedelta</span><span class="p">(</span><span class="n">days</span><span class="o">=</span><span class="mi">100</span><span class="p">)</span> <span class="c1"># 100 일전 데이터 부터 시작 - 피쳐 엔지니어링은 최소 60 개의 일봉이 필요함</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">start_dt</span><span class="p">,</span> <span class="n">today_dt</span><span class="p">)</span>

    <span class="n">kosdaq_list</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_pickle</span><span class="p">(</span><span class="s1">&#39;kosdaq_list.pkl&#39;</span><span class="p">)</span>

    <span class="n">price_data</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">()</span>

    <span class="k">for</span> <span class="n">code</span><span class="p">,</span> <span class="n">name</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">kosdaq_list</span><span class="p">[</span><span class="s1">&#39;code&#39;</span><span class="p">],</span> <span class="n">kosdaq_list</span><span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">]):</span>  <span class="c1"># 코스닥 모든 종목에서 대하여 반복</span>
        <span class="n">daily_price</span> <span class="o">=</span> <span class="n">fdr</span><span class="o">.</span><span class="n">DataReader</span><span class="p">(</span><span class="n">code</span><span class="p">,</span> <span class="n">start</span> <span class="o">=</span> <span class="n">start_dt</span><span class="p">,</span> <span class="n">end</span> <span class="o">=</span> <span class="n">today_dt</span><span class="p">)</span> <span class="c1"># 종목, 일봉, 데이터 갯수</span>

        <span class="n">daily_price</span><span class="p">[</span><span class="s1">&#39;code&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">code</span>
        <span class="n">daily_price</span><span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">name</span>
        <span class="n">price_data</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">concat</span><span class="p">([</span><span class="n">price_data</span><span class="p">,</span> <span class="n">daily_price</span><span class="p">],</span> <span class="n">axis</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>   

    <span class="n">price_data</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;date&#39;</span>
    <span class="n">price_data</span><span class="o">.</span><span class="n">columns</span><span class="o">=</span> <span class="n">price_data</span><span class="o">.</span><span class="n">columns</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="c1"># 컬럼 이름 소문자로 변경</span>

    <span class="n">kosdaq_index</span> <span class="o">=</span> <span class="n">fdr</span><span class="o">.</span><span class="n">DataReader</span><span class="p">(</span><span class="s1">&#39;KQ11&#39;</span><span class="p">,</span> <span class="n">start</span> <span class="o">=</span> <span class="n">start_dt</span><span class="p">,</span> <span class="n">end</span> <span class="o">=</span> <span class="n">today_dt</span><span class="p">)</span> <span class="c1"># 데이터 호출</span>
    <span class="n">kosdaq_index</span><span class="o">.</span><span class="n">columns</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;close&#39;</span><span class="p">,</span><span class="s1">&#39;open&#39;</span><span class="p">,</span><span class="s1">&#39;high&#39;</span><span class="p">,</span><span class="s1">&#39;low&#39;</span><span class="p">,</span><span class="s1">&#39;volume&#39;</span><span class="p">,</span><span class="s1">&#39;change&#39;</span><span class="p">]</span> <span class="c1"># 컬럼명 변경</span>
    <span class="n">kosdaq_index</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;date&#39;</span> <span class="c1"># 인덱스 이름 생성</span>
    <span class="n">kosdaq_index</span><span class="o">.</span><span class="n">sort_index</span><span class="p">(</span><span class="n">inplace</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span> <span class="c1"># 인덱스(날짜) 로 정렬 </span>
    <span class="n">kosdaq_index</span><span class="p">[</span><span class="s1">&#39;kosdaq_return&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">kosdaq_index</span><span class="p">[</span><span class="s1">&#39;close&#39;</span><span class="p">]</span><span class="o">/</span><span class="n">kosdaq_index</span><span class="p">[</span><span class="s1">&#39;close&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">shift</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="c1"># 수익율 : 전 날 종가대비 당일 종가</span>

    <span class="n">merged</span> <span class="o">=</span> <span class="n">price_data</span><span class="o">.</span><span class="n">merge</span><span class="p">(</span><span class="n">kosdaq_index</span><span class="p">[</span><span class="s1">&#39;kosdaq_return&#39;</span><span class="p">],</span> <span class="n">left_index</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">right_index</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">how</span><span class="o">=</span><span class="s1">&#39;left&#39;</span><span class="p">)</span>

    <span class="n">return_all</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">()</span>

    <span class="k">for</span> <span class="n">code</span> <span class="ow">in</span> <span class="n">kosdaq_list</span><span class="p">[</span><span class="s1">&#39;code&#39;</span><span class="p">]:</span>  

        <span class="n">stock_return</span> <span class="o">=</span> <span class="n">merged</span><span class="p">[</span><span class="n">merged</span><span class="p">[</span><span class="s1">&#39;code&#39;</span><span class="p">]</span><span class="o">==</span><span class="n">code</span><span class="p">]</span><span class="o">.</span><span class="n">sort_index</span><span class="p">()</span>
        <span class="n">stock_return</span><span class="p">[</span><span class="s1">&#39;return&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">stock_return</span><span class="p">[</span><span class="s1">&#39;close&#39;</span><span class="p">]</span><span class="o">/</span><span class="n">stock_return</span><span class="p">[</span><span class="s1">&#39;close&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">shift</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="c1"># 종목별 전일 종가 대비 당일 종가 수익율</span>
        <span class="n">c1</span> <span class="o">=</span> <span class="p">(</span><span class="n">stock_return</span><span class="p">[</span><span class="s1">&#39;kosdaq_return&#39;</span><span class="p">]</span> <span class="o">&lt;</span> <span class="mi">1</span><span class="p">)</span> <span class="c1"># 수익율 1 보다 작음. 당일 종가가 전일 종가보다 낮음 (코스닥 지표)</span>
        <span class="n">c2</span> <span class="o">=</span> <span class="p">(</span><span class="n">stock_return</span><span class="p">[</span><span class="s1">&#39;return&#39;</span><span class="p">]</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">)</span> <span class="c1"># 수익율 1 보다 큼. 당일 종가가 전일 종가보다 큼 (개별 종목)</span>
        <span class="n">stock_return</span><span class="p">[</span><span class="s1">&#39;win_market&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">where</span><span class="p">((</span><span class="n">c1</span><span class="o">&amp;</span><span class="n">c2</span><span class="p">),</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span> <span class="c1"># C1 과 C2 조건을 동시에 만족하면 1, 아니면 0</span>
        <span class="n">return_all</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">concat</span><span class="p">([</span><span class="n">return_all</span><span class="p">,</span> <span class="n">stock_return</span><span class="p">],</span> <span class="n">axis</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span> 

    <span class="n">return_all</span><span class="o">.</span><span class="n">dropna</span><span class="p">(</span><span class="n">inplace</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>    

    <span class="n">model_inputs</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">()</span>

    <span class="k">for</span> <span class="n">code</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">sector</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">kosdaq_list</span><span class="p">[</span><span class="s1">&#39;code&#39;</span><span class="p">],</span> <span class="n">kosdaq_list</span><span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">],</span> <span class="n">kosdaq_list</span><span class="p">[</span><span class="s1">&#39;sector&#39;</span><span class="p">]):</span>

        <span class="n">data</span> <span class="o">=</span> <span class="n">return_all</span><span class="p">[</span><span class="n">return_all</span><span class="p">[</span><span class="s1">&#39;code&#39;</span><span class="p">]</span><span class="o">==</span><span class="n">code</span><span class="p">]</span><span class="o">.</span><span class="n">sort_index</span><span class="p">()</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>    

        <span class="c1"># 가격변동성이 크고, 거래량이 몰린 종목이 주가가 상승한다</span>
        <span class="n">data</span><span class="p">[</span><span class="s1">&#39;price_mean&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s1">&#39;close&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">rolling</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span>
        <span class="n">data</span><span class="p">[</span><span class="s1">&#39;price_std&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s1">&#39;close&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">rolling</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span><span class="o">.</span><span class="n">std</span><span class="p">(</span><span class="n">ddof</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
        <span class="n">data</span><span class="p">[</span><span class="s1">&#39;price_z&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="s1">&#39;close&#39;</span><span class="p">]</span> <span class="o">-</span> <span class="n">data</span><span class="p">[</span><span class="s1">&#39;price_mean&#39;</span><span class="p">])</span><span class="o">/</span><span class="n">data</span><span class="p">[</span><span class="s1">&#39;price_std&#39;</span><span class="p">]</span>    
        <span class="n">data</span><span class="p">[</span><span class="s1">&#39;volume_mean&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s1">&#39;volume&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">rolling</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span>
        <span class="n">data</span><span class="p">[</span><span class="s1">&#39;volume_std&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s1">&#39;volume&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">rolling</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span><span class="o">.</span><span class="n">std</span><span class="p">(</span><span class="n">ddof</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
        <span class="n">data</span><span class="p">[</span><span class="s1">&#39;volume_z&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="s1">&#39;volume&#39;</span><span class="p">]</span> <span class="o">-</span> <span class="n">data</span><span class="p">[</span><span class="s1">&#39;volume_mean&#39;</span><span class="p">])</span><span class="o">/</span><span class="n">data</span><span class="p">[</span><span class="s1">&#39;volume_std&#39;</span><span class="p">]</span>

        <span class="c1"># 위꼬리가 긴 양봉이 자주발생한다.</span>
        <span class="n">data</span><span class="p">[</span><span class="s1">&#39;positive_candle&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="s1">&#39;close&#39;</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">data</span><span class="p">[</span><span class="s1">&#39;open&#39;</span><span class="p">])</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">int</span><span class="p">)</span> <span class="c1"># 양봉</span>
        <span class="n">data</span><span class="p">[</span><span class="s1">&#39;high/close&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="s1">&#39;positive_candle&#39;</span><span class="p">]</span><span class="o">==</span><span class="mi">1</span><span class="p">)</span><span class="o">*</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="s1">&#39;high&#39;</span><span class="p">]</span><span class="o">/</span><span class="n">data</span><span class="p">[</span><span class="s1">&#39;close&#39;</span><span class="p">]</span> <span class="o">&gt;</span> <span class="mf">1.1</span><span class="p">)</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">int</span><span class="p">)</span> <span class="c1"># 양봉이면서 고가가 종가보다 높게 위치</span>
        <span class="n">data</span><span class="p">[</span><span class="s1">&#39;num_high/close&#39;</span><span class="p">]</span> <span class="o">=</span>  <span class="n">data</span><span class="p">[</span><span class="s1">&#39;high/close&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">rolling</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>
        <span class="n">data</span><span class="p">[</span><span class="s1">&#39;long_candle&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="s1">&#39;positive_candle&#39;</span><span class="p">]</span><span class="o">==</span><span class="mi">1</span><span class="p">)</span><span class="o">*</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="s1">&#39;high&#39;</span><span class="p">]</span><span class="o">==</span><span class="n">data</span><span class="p">[</span><span class="s1">&#39;close&#39;</span><span class="p">])</span><span class="o">*</span>\
        <span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="s1">&#39;low&#39;</span><span class="p">]</span><span class="o">==</span><span class="n">data</span><span class="p">[</span><span class="s1">&#39;open&#39;</span><span class="p">])</span><span class="o">*</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="s1">&#39;close&#39;</span><span class="p">]</span><span class="o">/</span><span class="n">data</span><span class="p">[</span><span class="s1">&#39;open&#39;</span><span class="p">]</span> <span class="o">&gt;</span> <span class="mf">1.2</span><span class="p">)</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">int</span><span class="p">)</span> <span class="c1"># 장대 양봉을 데이터로 표현</span>
        <span class="n">data</span><span class="p">[</span><span class="s1">&#39;num_long&#39;</span><span class="p">]</span> <span class="o">=</span>  <span class="n">data</span><span class="p">[</span><span class="s1">&#39;long_candle&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">rolling</span><span class="p">(</span><span class="mi">60</span><span class="p">)</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span> <span class="c1"># 지난 20 일 동안 장대양봉의 갯 수</span>


         <span class="c1"># 거래량이 종좀 터지며 매집의 흔적을 보인다   </span>
        <span class="n">data</span><span class="p">[</span><span class="s1">&#39;volume_mean&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s1">&#39;volume&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">rolling</span><span class="p">(</span><span class="mi">60</span><span class="p">)</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span>
        <span class="n">data</span><span class="p">[</span><span class="s1">&#39;volume_std&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s1">&#39;volume&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">rolling</span><span class="p">(</span><span class="mi">60</span><span class="p">)</span><span class="o">.</span><span class="n">std</span><span class="p">()</span>
        <span class="n">data</span><span class="p">[</span><span class="s1">&#39;volume_z&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="s1">&#39;volume&#39;</span><span class="p">]</span> <span class="o">-</span> <span class="n">data</span><span class="p">[</span><span class="s1">&#39;volume_mean&#39;</span><span class="p">])</span><span class="o">/</span><span class="n">data</span><span class="p">[</span><span class="s1">&#39;volume_std&#39;</span><span class="p">]</span> <span class="c1"># 거래량은 종목과 주가에 따라 다르기 떄문에 표준화한 값이 필요함</span>
        <span class="n">data</span><span class="p">[</span><span class="s1">&#39;z&gt;1.96&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="s1">&#39;close&#39;</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">data</span><span class="p">[</span><span class="s1">&#39;open&#39;</span><span class="p">])</span><span class="o">*</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="s1">&#39;volume_z&#39;</span><span class="p">]</span> <span class="o">&gt;</span> <span class="mf">1.65</span><span class="p">)</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">int</span><span class="p">)</span> <span class="c1"># 양봉이면서 거래량이 90%신뢰구간을 벗어난 날</span>
        <span class="n">data</span><span class="p">[</span><span class="s1">&#39;num_z&gt;1.96&#39;</span><span class="p">]</span> <span class="o">=</span>  <span class="n">data</span><span class="p">[</span><span class="s1">&#39;z&gt;1.96&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">rolling</span><span class="p">(</span><span class="mi">60</span><span class="p">)</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>  <span class="c1"># 양봉이면서 거래량이 90% 신뢰구간을 벗어난 날을 카운트</span>

        <span class="c1"># 주가지수보다 더 좋은 수익율을 보여준다</span>
        <span class="n">data</span><span class="p">[</span><span class="s1">&#39;num_win_market&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s1">&#39;win_market&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">rolling</span><span class="p">(</span><span class="mi">60</span><span class="p">)</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span> <span class="c1"># 주가지수 수익율이 1 보다 작을 때, 종목 수익율이 1 보다 큰 날 수</span>
        <span class="n">data</span><span class="p">[</span><span class="s1">&#39;pct_win_market&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="s1">&#39;return&#39;</span><span class="p">]</span><span class="o">/</span><span class="n">data</span><span class="p">[</span><span class="s1">&#39;kosdaq_return&#39;</span><span class="p">])</span><span class="o">.</span><span class="n">rolling</span><span class="p">(</span><span class="mi">60</span><span class="p">)</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span> <span class="c1"># 주가지수 수익율 대비 종목 수익율</span>


        <span class="c1"># 동종업체 수익률보다 더 좋은 수익율을 보여준다.           </span>
        <span class="n">data</span><span class="p">[</span><span class="s1">&#39;return_mean&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s1">&#39;return&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">rolling</span><span class="p">(</span><span class="mi">60</span><span class="p">)</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span> <span class="c1"># 종목별 최근 60 일 수익율의 평균</span>
        <span class="n">data</span><span class="p">[</span><span class="s1">&#39;sector&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">sector</span>    
        <span class="n">data</span><span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">name</span>

        <span class="n">data</span> <span class="o">=</span> <span class="n">data</span><span class="p">[(</span><span class="n">data</span><span class="p">[</span><span class="s1">&#39;price_std&#39;</span><span class="p">]</span><span class="o">!=</span><span class="mi">0</span><span class="p">)</span> <span class="o">&amp;</span> <span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="s1">&#39;volume_std&#39;</span><span class="p">]</span><span class="o">!=</span><span class="mi">0</span><span class="p">)]</span>    

        <span class="n">model_inputs</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">concat</span><span class="p">([</span><span class="n">data</span><span class="p">,</span> <span class="n">model_inputs</span><span class="p">],</span> <span class="n">axis</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>

    <span class="n">model_inputs</span><span class="p">[</span><span class="s1">&#39;sector_return&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">model_inputs</span><span class="o">.</span><span class="n">groupby</span><span class="p">([</span><span class="s1">&#39;sector&#39;</span><span class="p">,</span> <span class="n">model_inputs</span><span class="o">.</span><span class="n">index</span><span class="p">])[</span><span class="s1">&#39;return&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">transform</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="o">.</span><span class="n">mean</span><span class="p">())</span> <span class="c1"># 섹터의 평균 수익율 계산</span>
    <span class="n">model_inputs</span><span class="p">[</span><span class="s1">&#39;return over sector&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="n">model_inputs</span><span class="p">[</span><span class="s1">&#39;return&#39;</span><span class="p">]</span><span class="o">/</span><span class="n">model_inputs</span><span class="p">[</span><span class="s1">&#39;sector_return&#39;</span><span class="p">])</span> <span class="c1"># 섹터 평균 수익률 대비 종목 수익률 계산</span>
    <span class="n">model_inputs</span><span class="o">.</span><span class="n">dropna</span><span class="p">(</span><span class="n">inplace</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span> <span class="c1"># Missing 값 있는 행 모두 제거</span>


    <span class="n">feature_list</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;price_z&#39;</span><span class="p">,</span><span class="s1">&#39;volume_z&#39;</span><span class="p">,</span><span class="s1">&#39;num_high/close&#39;</span><span class="p">,</span><span class="s1">&#39;num_win_market&#39;</span><span class="p">,</span><span class="s1">&#39;pct_win_market&#39;</span><span class="p">,</span><span class="s1">&#39;return over sector&#39;</span><span class="p">]</span>

    <span class="n">X</span> <span class="o">=</span> <span class="n">model_inputs</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">today_dt</span><span class="p">][[</span><span class="s1">&#39;code&#39;</span><span class="p">,</span><span class="s1">&#39;name&#39;</span><span class="p">,</span><span class="s1">&#39;return&#39;</span><span class="p">,</span><span class="s1">&#39;kosdaq_return&#39;</span><span class="p">,</span><span class="s1">&#39;close&#39;</span><span class="p">]</span> <span class="o">+</span> <span class="n">feature_list</span><span class="p">]</span><span class="o">.</span><span class="n">set_index</span><span class="p">(</span><span class="s1">&#39;code&#39;</span><span class="p">)</span> 

    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s2">&quot;gam.pkl&quot;</span><span class="p">,</span> <span class="s2">&quot;rb&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">file</span><span class="p">:</span>
        <span class="n">gam</span> <span class="o">=</span> <span class="n">pickle</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">file</span><span class="p">)</span>     

    <span class="n">yhat</span> <span class="o">=</span> <span class="n">gam</span><span class="o">.</span><span class="n">predict_proba</span><span class="p">(</span><span class="n">X</span><span class="p">[</span><span class="n">feature_list</span><span class="p">])</span>
    <span class="n">X</span><span class="p">[</span><span class="s1">&#39;yhat&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">yhat</span>

    <span class="n">tops</span> <span class="o">=</span> <span class="n">X</span><span class="p">[</span><span class="n">X</span><span class="p">[</span><span class="s1">&#39;yhat&#39;</span><span class="p">]</span> <span class="o">&gt;=</span> <span class="mf">0.3</span><span class="p">]</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="n">by</span><span class="o">=</span><span class="s1">&#39;yhat&#39;</span><span class="p">,</span> <span class="n">ascending</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span> <span class="c1"># 스코어 0.3 이상 종목만 </span>
    <span class="nb">print</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">tops</span><span class="p">))</span>
    
    <span class="n">tops</span><span class="p">[</span><span class="s1">&#39;return_rank&#39;</span><span class="p">]</span>  <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">qcut</span><span class="p">(</span><span class="n">tops</span><span class="p">[</span><span class="s1">&#39;return&#39;</span><span class="p">],</span> <span class="n">q</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">labels</span><span class="o">=</span><span class="nb">range</span><span class="p">(</span><span class="mi">3</span><span class="p">))</span> <span class="c1"># 종가 수익률</span>
    <span class="n">tops</span><span class="p">[</span><span class="s1">&#39;price_rank&#39;</span><span class="p">]</span>  <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">qcut</span><span class="p">(</span><span class="n">tops</span><span class="p">[</span><span class="s1">&#39;price_z&#39;</span><span class="p">],</span> <span class="n">q</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">labels</span><span class="o">=</span><span class="nb">range</span><span class="p">(</span><span class="mi">3</span><span class="p">))</span> <span class="c1"># 가격 변동성</span>
   
    <span class="n">select_tops</span> <span class="o">=</span> <span class="n">tops</span><span class="p">[(</span><span class="n">tops</span><span class="p">[</span><span class="s1">&#39;return_rank&#39;</span><span class="p">]</span><span class="o">==</span><span class="mi">2</span><span class="p">)</span> <span class="o">&amp;</span> <span class="p">(</span><span class="n">tops</span><span class="p">[</span><span class="s1">&#39;price_rank&#39;</span><span class="p">]</span><span class="o">==</span><span class="mi">0</span><span class="p">)][[</span><span class="s1">&#39;name&#39;</span><span class="p">,</span><span class="s1">&#39;return_rank&#39;</span><span class="p">,</span><span class="s1">&#39;price_rank&#39;</span><span class="p">,</span><span class="s1">&#39;yhat&#39;</span><span class="p">,</span><span class="s1">&#39;return&#39;</span><span class="p">,</span> <span class="s1">&#39;kosdaq_return&#39;</span><span class="p">,</span><span class="s1">&#39;close&#39;</span><span class="p">]]</span>     
    
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">select_tops</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span> <span class="c1"># 최소한 2개 종목 - 추천 리스크 분산        </span>
        <span class="k">return</span> <span class="n">select_tops</span>    
    
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="kc">None</span>
</pre></div>
</div>
</div>
</div>
<p><br> 수익률 검정하는 프로세스를 하나의 함수로 구현합니다.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">outcome_tops</span><span class="p">(</span><span class="n">select_tops</span><span class="p">,</span> <span class="n">today_dt</span><span class="p">,</span> <span class="n">end_dt</span><span class="p">):</span>   

    <span class="n">outcome_data</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">()</span>

    <span class="k">for</span> <span class="n">code</span> <span class="ow">in</span> <span class="nb">list</span><span class="p">(</span><span class="n">select_tops</span><span class="o">.</span><span class="n">index</span><span class="p">):</span>  <span class="c1"># 스코어가 생성된 모든 종목에서 대하여 반복</span>
        <span class="n">daily_price</span> <span class="o">=</span> <span class="n">fdr</span><span class="o">.</span><span class="n">DataReader</span><span class="p">(</span><span class="n">code</span><span class="p">,</span>  <span class="n">start</span> <span class="o">=</span> <span class="n">today_dt</span><span class="p">,</span> <span class="n">end</span> <span class="o">=</span> <span class="n">end_dt</span><span class="p">)</span> <span class="c1"># 종목, 일봉, 데이터 갯수</span>
        <span class="n">daily_price</span><span class="p">[</span><span class="s1">&#39;code&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">code</span>  

        <span class="n">daily_price</span><span class="p">[</span><span class="s1">&#39;close_r1&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">daily_price</span><span class="p">[</span><span class="s1">&#39;Close&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">shift</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span><span class="o">/</span><span class="n">daily_price</span><span class="p">[</span><span class="s1">&#39;Close&#39;</span><span class="p">]</span>   
        <span class="n">daily_price</span><span class="p">[</span><span class="s1">&#39;close_r2&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">daily_price</span><span class="p">[</span><span class="s1">&#39;Close&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">shift</span><span class="p">(</span><span class="o">-</span><span class="mi">2</span><span class="p">)</span><span class="o">/</span><span class="n">daily_price</span><span class="p">[</span><span class="s1">&#39;Close&#39;</span><span class="p">]</span>  
        <span class="n">daily_price</span><span class="p">[</span><span class="s1">&#39;close_r3&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">daily_price</span><span class="p">[</span><span class="s1">&#39;Close&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">shift</span><span class="p">(</span><span class="o">-</span><span class="mi">3</span><span class="p">)</span><span class="o">/</span><span class="n">daily_price</span><span class="p">[</span><span class="s1">&#39;Close&#39;</span><span class="p">]</span>   
        <span class="n">daily_price</span><span class="p">[</span><span class="s1">&#39;close_r4&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">daily_price</span><span class="p">[</span><span class="s1">&#39;Close&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">shift</span><span class="p">(</span><span class="o">-</span><span class="mi">4</span><span class="p">)</span><span class="o">/</span><span class="n">daily_price</span><span class="p">[</span><span class="s1">&#39;Close&#39;</span><span class="p">]</span>   
        <span class="n">daily_price</span><span class="p">[</span><span class="s1">&#39;close_r5&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">daily_price</span><span class="p">[</span><span class="s1">&#39;Close&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">shift</span><span class="p">(</span><span class="o">-</span><span class="mi">5</span><span class="p">)</span><span class="o">/</span><span class="n">daily_price</span><span class="p">[</span><span class="s1">&#39;Close&#39;</span><span class="p">]</span>   

        <span class="n">daily_price</span><span class="p">[</span><span class="s1">&#39;max_close&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">daily_price</span><span class="p">[[</span><span class="s1">&#39;close_r1&#39;</span><span class="p">,</span><span class="s1">&#39;close_r2&#39;</span><span class="p">,</span><span class="s1">&#39;close_r3&#39;</span><span class="p">,</span><span class="s1">&#39;close_r4&#39;</span><span class="p">,</span><span class="s1">&#39;close_r5&#39;</span><span class="p">]]</span><span class="o">.</span><span class="n">max</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
        <span class="n">daily_price</span><span class="p">[</span><span class="s1">&#39;mean_close&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">daily_price</span><span class="p">[[</span><span class="s1">&#39;close_r1&#39;</span><span class="p">,</span><span class="s1">&#39;close_r2&#39;</span><span class="p">,</span><span class="s1">&#39;close_r3&#39;</span><span class="p">,</span><span class="s1">&#39;close_r4&#39;</span><span class="p">,</span><span class="s1">&#39;close_r5&#39;</span><span class="p">]]</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
        <span class="n">daily_price</span><span class="p">[</span><span class="s1">&#39;min_close&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">daily_price</span><span class="p">[[</span><span class="s1">&#39;close_r1&#39;</span><span class="p">,</span><span class="s1">&#39;close_r2&#39;</span><span class="p">,</span><span class="s1">&#39;close_r3&#39;</span><span class="p">,</span><span class="s1">&#39;close_r4&#39;</span><span class="p">,</span><span class="s1">&#39;close_r5&#39;</span><span class="p">]]</span><span class="o">.</span><span class="n">min</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>

        <span class="n">daily_price</span><span class="p">[</span><span class="s1">&#39;buy_price&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">daily_price</span><span class="p">[</span><span class="s1">&#39;Close&#39;</span><span class="p">]</span>
        <span class="n">daily_price</span><span class="p">[</span><span class="s1">&#39;buy_low&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">daily_price</span><span class="p">[</span><span class="s1">&#39;Low&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">shift</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span> 
        <span class="n">daily_price</span><span class="p">[</span><span class="s1">&#39;buy_high&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">daily_price</span><span class="p">[</span><span class="s1">&#39;High&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">shift</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span>

        <span class="n">daily_price</span><span class="p">[</span><span class="s1">&#39;buy&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">where</span><span class="p">((</span><span class="n">daily_price</span><span class="p">[</span><span class="s1">&#39;buy_price&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">between</span><span class="p">(</span><span class="n">daily_price</span><span class="p">[</span><span class="s1">&#39;buy_low&#39;</span><span class="p">],</span> <span class="n">daily_price</span><span class="p">[</span><span class="s1">&#39;buy_high&#39;</span><span class="p">])),</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span> 

        <span class="n">outcome_data</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">concat</span><span class="p">([</span><span class="n">outcome_data</span><span class="p">,</span> <span class="n">daily_price</span><span class="p">],</span> <span class="n">axis</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>

    <span class="n">outcome</span> <span class="o">=</span> <span class="n">outcome_data</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">today_dt</span><span class="p">][[</span><span class="s1">&#39;code&#39;</span><span class="p">,</span><span class="s1">&#39;buy&#39;</span><span class="p">,</span><span class="s1">&#39;buy_price&#39;</span><span class="p">,</span><span class="s1">&#39;buy_low&#39;</span><span class="p">,</span><span class="s1">&#39;buy_high&#39;</span><span class="p">,</span><span class="s1">&#39;max_close&#39;</span><span class="p">,</span><span class="s1">&#39;mean_close&#39;</span><span class="p">,</span><span class="s1">&#39;min_close&#39;</span><span class="p">]]</span><span class="o">.</span><span class="n">set_index</span><span class="p">(</span><span class="s1">&#39;code&#39;</span><span class="p">)</span>
    <span class="n">select_outcome</span> <span class="o">=</span> <span class="n">select_tops</span><span class="o">.</span><span class="n">merge</span><span class="p">(</span><span class="n">outcome</span><span class="p">,</span> <span class="n">left_index</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">right_index</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">how</span><span class="o">=</span><span class="s1">&#39;inner&#39;</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">select_outcome</span><span class="p">[[</span><span class="s1">&#39;name&#39;</span><span class="p">,</span><span class="s1">&#39;buy&#39;</span><span class="p">,</span><span class="s1">&#39;buy_price&#39;</span><span class="p">,</span> <span class="s1">&#39;buy_low&#39;</span><span class="p">,</span><span class="s1">&#39;buy_high&#39;</span><span class="p">,</span><span class="s1">&#39;yhat&#39;</span><span class="p">,</span><span class="s1">&#39;max_close&#39;</span><span class="p">,</span><span class="s1">&#39;mean_close&#39;</span><span class="p">,</span><span class="s1">&#39;min_close&#39;</span><span class="p">]]</span>
</pre></div>
</div>
</div>
</div>
<p><br> <strong>2022년 4월 1일 - 종목 선정 및 수익률 테스트</strong><br />
상당이 고무적입니다. CJ 프레시웨이를 제외한 모든 종목이 익절이 가능합니다. 단 CSA 코스믹은 전일 종가로 당일 매수가 불가능합니다. 2022년 4월 2일 갭상승으로 시작을 했습니다.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">select_tops</span> <span class="o">=</span> <span class="n">select_stocks</span><span class="p">(</span><span class="s1">&#39;2022-04-01&#39;</span><span class="p">)</span>

<span class="k">if</span> <span class="n">select_tops</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
    <span class="n">results</span> <span class="o">=</span> <span class="n">outcome_tops</span><span class="p">(</span><span class="n">select_tops</span><span class="p">,</span> <span class="s1">&#39;2022-04-01&#39;</span><span class="p">,</span> <span class="s1">&#39;2022-04-08&#39;</span><span class="p">)</span> <span class="c1"># 5 영업일</span>
<span class="n">results</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="n">by</span><span class="o">=</span><span class="s1">&#39;buy&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">style</span><span class="o">.</span><span class="n">set_table_attributes</span><span class="p">(</span><span class="s1">&#39;style=&quot;font-size: 12px&quot;&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>2021-12-22 00:00:00 2022-04-01
205
</pre></div>
</div>
<div class="output text_html"><style type="text/css">
</style>
<table id="T_054fe_" style="font-size: 12px">
  <thead>
    <tr>
      <th class="blank level0" >&nbsp;</th>
      <th class="col_heading level0 col0" >name</th>
      <th class="col_heading level0 col1" >buy</th>
      <th class="col_heading level0 col2" >buy_price</th>
      <th class="col_heading level0 col3" >buy_low</th>
      <th class="col_heading level0 col4" >buy_high</th>
      <th class="col_heading level0 col5" >yhat</th>
      <th class="col_heading level0 col6" >max_close</th>
      <th class="col_heading level0 col7" >mean_close</th>
      <th class="col_heading level0 col8" >min_close</th>
    </tr>
    <tr>
      <th class="index_name level0" >code</th>
      <th class="blank col0" >&nbsp;</th>
      <th class="blank col1" >&nbsp;</th>
      <th class="blank col2" >&nbsp;</th>
      <th class="blank col3" >&nbsp;</th>
      <th class="blank col4" >&nbsp;</th>
      <th class="blank col5" >&nbsp;</th>
      <th class="blank col6" >&nbsp;</th>
      <th class="blank col7" >&nbsp;</th>
      <th class="blank col8" >&nbsp;</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th id="T_054fe_level0_row0" class="row_heading level0 row0" >083660</th>
      <td id="T_054fe_row0_col0" class="data row0 col0" >CSA 코스믹</td>
      <td id="T_054fe_row0_col1" class="data row0 col1" >0</td>
      <td id="T_054fe_row0_col2" class="data row0 col2" >2080</td>
      <td id="T_054fe_row0_col3" class="data row0 col3" >2100.000000</td>
      <td id="T_054fe_row0_col4" class="data row0 col4" >2270.000000</td>
      <td id="T_054fe_row0_col5" class="data row0 col5" >0.353097</td>
      <td id="T_054fe_row0_col6" class="data row0 col6" >1.086538</td>
      <td id="T_054fe_row0_col7" class="data row0 col7" >1.066827</td>
      <td id="T_054fe_row0_col8" class="data row0 col8" >1.040865</td>
    </tr>
    <tr>
      <th id="T_054fe_level0_row1" class="row_heading level0 row1" >056090</th>
      <td id="T_054fe_row1_col0" class="data row1 col0" >에디슨INNO</td>
      <td id="T_054fe_row1_col1" class="data row1 col1" >1</td>
      <td id="T_054fe_row1_col2" class="data row1 col2" >12800</td>
      <td id="T_054fe_row1_col3" class="data row1 col3" >11350.000000</td>
      <td id="T_054fe_row1_col4" class="data row1 col4" >13350.000000</td>
      <td id="T_054fe_row1_col5" class="data row1 col5" >0.542471</td>
      <td id="T_054fe_row1_col6" class="data row1 col6" >1.273438</td>
      <td id="T_054fe_row1_col7" class="data row1 col7" >1.127344</td>
      <td id="T_054fe_row1_col8" class="data row1 col8" >0.929688</td>
    </tr>
    <tr>
      <th id="T_054fe_level0_row2" class="row_heading level0 row2" >024740</th>
      <td id="T_054fe_row2_col0" class="data row2 col0" >한일단조</td>
      <td id="T_054fe_row2_col1" class="data row2 col1" >1</td>
      <td id="T_054fe_row2_col2" class="data row2 col2" >3185</td>
      <td id="T_054fe_row2_col3" class="data row2 col3" >3185.000000</td>
      <td id="T_054fe_row2_col4" class="data row2 col4" >3300.000000</td>
      <td id="T_054fe_row2_col5" class="data row2 col5" >0.356930</td>
      <td id="T_054fe_row2_col6" class="data row2 col6" >1.056515</td>
      <td id="T_054fe_row2_col7" class="data row2 col7" >1.024804</td>
      <td id="T_054fe_row2_col8" class="data row2 col8" >0.982732</td>
    </tr>
    <tr>
      <th id="T_054fe_level0_row3" class="row_heading level0 row3" >051500</th>
      <td id="T_054fe_row3_col0" class="data row3 col0" >CJ프레시웨이</td>
      <td id="T_054fe_row3_col1" class="data row3 col1" >1</td>
      <td id="T_054fe_row3_col2" class="data row3 col2" >37400</td>
      <td id="T_054fe_row3_col3" class="data row3 col3" >36450.000000</td>
      <td id="T_054fe_row3_col4" class="data row3 col4" >37600.000000</td>
      <td id="T_054fe_row3_col5" class="data row3 col5" >0.333196</td>
      <td id="T_054fe_row3_col6" class="data row3 col6" >1.002674</td>
      <td id="T_054fe_row3_col7" class="data row3 col7" >0.989305</td>
      <td id="T_054fe_row3_col8" class="data row3 col8" >0.973262</td>
    </tr>
    <tr>
      <th id="T_054fe_level0_row4" class="row_heading level0 row4" >122690</th>
      <td id="T_054fe_row4_col0" class="data row4 col0" >서진오토모티브</td>
      <td id="T_054fe_row4_col1" class="data row4 col1" >1</td>
      <td id="T_054fe_row4_col2" class="data row4 col2" >3350</td>
      <td id="T_054fe_row4_col3" class="data row4 col3" >3330.000000</td>
      <td id="T_054fe_row4_col4" class="data row4 col4" >3680.000000</td>
      <td id="T_054fe_row4_col5" class="data row4 col5" >0.320913</td>
      <td id="T_054fe_row4_col6" class="data row4 col6" >1.102985</td>
      <td id="T_054fe_row4_col7" class="data row4 col7" >1.070448</td>
      <td id="T_054fe_row4_col8" class="data row4 col8" >1.037313</td>
    </tr>
    <tr>
      <th id="T_054fe_level0_row5" class="row_heading level0 row5" >174880</th>
      <td id="T_054fe_row5_col0" class="data row5 col0" >장원테크</td>
      <td id="T_054fe_row5_col1" class="data row5 col1" >1</td>
      <td id="T_054fe_row5_col2" class="data row5 col2" >1990</td>
      <td id="T_054fe_row5_col3" class="data row5 col3" >1985.000000</td>
      <td id="T_054fe_row5_col4" class="data row5 col4" >2225.000000</td>
      <td id="T_054fe_row5_col5" class="data row5 col5" >0.301738</td>
      <td id="T_054fe_row5_col6" class="data row5 col6" >1.115578</td>
      <td id="T_054fe_row5_col7" class="data row5 col7" >0.987940</td>
      <td id="T_054fe_row5_col8" class="data row5 col8" >0.924623</td>
    </tr>
  </tbody>
</table>
</div></div>
</div>
<p><br> <strong>2022년 4월 18일 - 종목 선정 및 수익률 테스트</strong><br />
4 월 18일은 추천 종목이 없습니다.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">select_tops</span> <span class="o">=</span> <span class="n">select_stocks</span><span class="p">(</span><span class="s1">&#39;2022-04-18&#39;</span><span class="p">)</span>

<span class="k">if</span> <span class="n">select_tops</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
    <span class="n">results</span> <span class="o">=</span> <span class="n">outcome_tops</span><span class="p">(</span><span class="n">select_tops</span><span class="p">,</span> <span class="s1">&#39;2022-04-18&#39;</span><span class="p">,</span> <span class="s1">&#39;2022-04-25&#39;</span><span class="p">)</span> <span class="c1"># 5 영업일</span>
<span class="n">results</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="n">by</span><span class="o">=</span><span class="s1">&#39;buy&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">style</span><span class="o">.</span><span class="n">set_table_attributes</span><span class="p">(</span><span class="s1">&#39;style=&quot;font-size: 12px&quot;&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p><br> <strong>2022년 5월 2일 - 종목 선정 및 수익률 테스트</strong><br />
미래생명자원은 매수 후, 주가가 하락하는 것으로 나왔습니다. 다행이 급락 종목은 아니여서 손절로 대응하는 것이 좋을 것으로 판단됩니다.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">select_tops</span> <span class="o">=</span> <span class="n">select_stocks</span><span class="p">(</span><span class="s1">&#39;2022-05-02&#39;</span><span class="p">)</span>

<span class="k">if</span> <span class="n">select_tops</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
    <span class="n">results</span> <span class="o">=</span> <span class="n">outcome_tops</span><span class="p">(</span><span class="n">select_tops</span><span class="p">,</span> <span class="s1">&#39;2022-05-02&#39;</span><span class="p">,</span> <span class="s1">&#39;2022-05-10&#39;</span><span class="p">)</span> <span class="c1"># 5 영업일 (5월 5일 어린이날)</span>
    
<span class="n">results</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="n">by</span><span class="o">=</span><span class="s1">&#39;buy&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">style</span><span class="o">.</span><span class="n">set_table_attributes</span><span class="p">(</span><span class="s1">&#39;style=&quot;font-size: 12px&quot;&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>2022-01-22 00:00:00 2022-05-02
169
</pre></div>
</div>
<div class="output text_html"><style type="text/css">
</style>
<table id="T_4bf8b_" style="font-size: 12px">
  <thead>
    <tr>
      <th class="blank level0" >&nbsp;</th>
      <th class="col_heading level0 col0" >name</th>
      <th class="col_heading level0 col1" >buy</th>
      <th class="col_heading level0 col2" >buy_price</th>
      <th class="col_heading level0 col3" >buy_low</th>
      <th class="col_heading level0 col4" >buy_high</th>
      <th class="col_heading level0 col5" >yhat</th>
      <th class="col_heading level0 col6" >max_close</th>
      <th class="col_heading level0 col7" >mean_close</th>
      <th class="col_heading level0 col8" >min_close</th>
    </tr>
    <tr>
      <th class="index_name level0" >code</th>
      <th class="blank col0" >&nbsp;</th>
      <th class="blank col1" >&nbsp;</th>
      <th class="blank col2" >&nbsp;</th>
      <th class="blank col3" >&nbsp;</th>
      <th class="blank col4" >&nbsp;</th>
      <th class="blank col5" >&nbsp;</th>
      <th class="blank col6" >&nbsp;</th>
      <th class="blank col7" >&nbsp;</th>
      <th class="blank col8" >&nbsp;</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th id="T_4bf8b_level0_row0" class="row_heading level0 row0" >218150</th>
      <td id="T_4bf8b_row0_col0" class="data row0 col0" >미래생명자원</td>
      <td id="T_4bf8b_row0_col1" class="data row0 col1" >1</td>
      <td id="T_4bf8b_row0_col2" class="data row0 col2" >9690</td>
      <td id="T_4bf8b_row0_col3" class="data row0 col3" >9360.000000</td>
      <td id="T_4bf8b_row0_col4" class="data row0 col4" >9870.000000</td>
      <td id="T_4bf8b_row0_col5" class="data row0 col5" >0.430445</td>
      <td id="T_4bf8b_row0_col6" class="data row0 col6" >0.990712</td>
      <td id="T_4bf8b_row0_col7" class="data row0 col7" >0.918266</td>
      <td id="T_4bf8b_row0_col8" class="data row0 col8" >0.862745</td>
    </tr>
    <tr>
      <th id="T_4bf8b_level0_row1" class="row_heading level0 row1" >122640</th>
      <td id="T_4bf8b_row1_col0" class="data row1 col0" >예스티</td>
      <td id="T_4bf8b_row1_col1" class="data row1 col1" >1</td>
      <td id="T_4bf8b_row1_col2" class="data row1 col2" >8020</td>
      <td id="T_4bf8b_row1_col3" class="data row1 col3" >7950.000000</td>
      <td id="T_4bf8b_row1_col4" class="data row1 col4" >8440.000000</td>
      <td id="T_4bf8b_row1_col5" class="data row1 col5" >0.375530</td>
      <td id="T_4bf8b_row1_col6" class="data row1 col6" >1.093516</td>
      <td id="T_4bf8b_row1_col7" class="data row1 col7" >1.054115</td>
      <td id="T_4bf8b_row1_col8" class="data row1 col8" >1.026185</td>
    </tr>
  </tbody>
</table>
</div></div>
</div>
<p><br> <strong>2022년 5월 9일 - 종목 선정 및 수익률 테스트</strong><br />
‘buy’ 가 0 인 종목은 갭상이나 갭하락으로 전일 종가에 매수할 기회가 없는 종목을 의미합니다. ‘buy’ 가 1 인 종목만 보겠습니다. 이상네크웍스와 코맥스는 수익을 내기 어려웠을 것으로 판단됩니다.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">select_tops</span> <span class="o">=</span> <span class="n">select_stocks</span><span class="p">(</span><span class="s1">&#39;2022-05-09&#39;</span><span class="p">)</span>

<span class="k">if</span> <span class="n">select_tops</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
    <span class="n">results</span> <span class="o">=</span> <span class="n">outcome_tops</span><span class="p">(</span><span class="n">select_tops</span><span class="p">,</span> <span class="s1">&#39;2022-05-09&#39;</span><span class="p">,</span> <span class="s1">&#39;2022-05-16&#39;</span><span class="p">)</span> <span class="c1"># 5 영업일 (5월 5일 어린이날)</span>
    
<span class="n">results</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="n">by</span><span class="o">=</span><span class="s1">&#39;buy&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">style</span><span class="o">.</span><span class="n">set_table_attributes</span><span class="p">(</span><span class="s1">&#39;style=&quot;font-size: 12px&quot;&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>2022-01-29 00:00:00 2022-05-09
349
</pre></div>
</div>
<div class="output text_html"><style type="text/css">
</style>
<table id="T_1335f_" style="font-size: 12px">
  <thead>
    <tr>
      <th class="blank level0" >&nbsp;</th>
      <th class="col_heading level0 col0" >name</th>
      <th class="col_heading level0 col1" >buy</th>
      <th class="col_heading level0 col2" >buy_price</th>
      <th class="col_heading level0 col3" >buy_low</th>
      <th class="col_heading level0 col4" >buy_high</th>
      <th class="col_heading level0 col5" >yhat</th>
      <th class="col_heading level0 col6" >max_close</th>
      <th class="col_heading level0 col7" >mean_close</th>
      <th class="col_heading level0 col8" >min_close</th>
    </tr>
    <tr>
      <th class="index_name level0" >code</th>
      <th class="blank col0" >&nbsp;</th>
      <th class="blank col1" >&nbsp;</th>
      <th class="blank col2" >&nbsp;</th>
      <th class="blank col3" >&nbsp;</th>
      <th class="blank col4" >&nbsp;</th>
      <th class="blank col5" >&nbsp;</th>
      <th class="blank col6" >&nbsp;</th>
      <th class="blank col7" >&nbsp;</th>
      <th class="blank col8" >&nbsp;</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th id="T_1335f_level0_row0" class="row_heading level0 row0" >294090</th>
      <td id="T_1335f_row0_col0" class="data row0 col0" >이오플로우</td>
      <td id="T_1335f_row0_col1" class="data row0 col1" >0</td>
      <td id="T_1335f_row0_col2" class="data row0 col2" >21000</td>
      <td id="T_1335f_row0_col3" class="data row0 col3" >19500.000000</td>
      <td id="T_1335f_row0_col4" class="data row0 col4" >20800.000000</td>
      <td id="T_1335f_row0_col5" class="data row0 col5" >0.326005</td>
      <td id="T_1335f_row0_col6" class="data row0 col6" >1.023810</td>
      <td id="T_1335f_row0_col7" class="data row0 col7" >1.009048</td>
      <td id="T_1335f_row0_col8" class="data row0 col8" >0.985714</td>
    </tr>
    <tr>
      <th id="T_1335f_level0_row1" class="row_heading level0 row1" >950180</th>
      <td id="T_1335f_row1_col0" class="data row1 col0" >SNK</td>
      <td id="T_1335f_row1_col1" class="data row1 col1" >0</td>
      <td id="T_1335f_row1_col2" class="data row1 col2" >36700</td>
      <td id="T_1335f_row1_col3" class="data row1 col3" >36450.000000</td>
      <td id="T_1335f_row1_col4" class="data row1 col4" >36600.000000</td>
      <td id="T_1335f_row1_col5" class="data row1 col5" >0.319188</td>
      <td id="T_1335f_row1_col6" class="data row1 col6" >1.000000</td>
      <td id="T_1335f_row1_col7" class="data row1 col7" >0.998638</td>
      <td id="T_1335f_row1_col8" class="data row1 col8" >0.995913</td>
    </tr>
    <tr>
      <th id="T_1335f_level0_row2" class="row_heading level0 row2" >064850</th>
      <td id="T_1335f_row2_col0" class="data row2 col0" >에프앤가이드</td>
      <td id="T_1335f_row2_col1" class="data row2 col1" >0</td>
      <td id="T_1335f_row2_col2" class="data row2 col2" >8750</td>
      <td id="T_1335f_row2_col3" class="data row2 col3" >8380.000000</td>
      <td id="T_1335f_row2_col4" class="data row2 col4" >8620.000000</td>
      <td id="T_1335f_row2_col5" class="data row2 col5" >0.319054</td>
      <td id="T_1335f_row2_col6" class="data row2 col6" >0.973714</td>
      <td id="T_1335f_row2_col7" class="data row2 col7" >0.966400</td>
      <td id="T_1335f_row2_col8" class="data row2 col8" >0.961143</td>
    </tr>
    <tr>
      <th id="T_1335f_level0_row3" class="row_heading level0 row3" >078020</th>
      <td id="T_1335f_row3_col0" class="data row3 col0" >이베스트투자증권</td>
      <td id="T_1335f_row3_col1" class="data row3 col1" >0</td>
      <td id="T_1335f_row3_col2" class="data row3 col2" >7330</td>
      <td id="T_1335f_row3_col3" class="data row3 col3" >7170.000000</td>
      <td id="T_1335f_row3_col4" class="data row3 col4" >7300.000000</td>
      <td id="T_1335f_row3_col5" class="data row3 col5" >0.304402</td>
      <td id="T_1335f_row3_col6" class="data row3 col6" >0.994543</td>
      <td id="T_1335f_row3_col7" class="data row3 col7" >0.972715</td>
      <td id="T_1335f_row3_col8" class="data row3 col8" >0.953615</td>
    </tr>
    <tr>
      <th id="T_1335f_level0_row4" class="row_heading level0 row4" >036560</th>
      <td id="T_1335f_row4_col0" class="data row4 col0" >영풍정밀</td>
      <td id="T_1335f_row4_col1" class="data row4 col1" >1</td>
      <td id="T_1335f_row4_col2" class="data row4 col2" >9610</td>
      <td id="T_1335f_row4_col3" class="data row4 col3" >9400.000000</td>
      <td id="T_1335f_row4_col4" class="data row4 col4" >9730.000000</td>
      <td id="T_1335f_row4_col5" class="data row4 col5" >0.324176</td>
      <td id="T_1335f_row4_col6" class="data row4 col6" >1.014568</td>
      <td id="T_1335f_row4_col7" class="data row4 col7" >1.003538</td>
      <td id="T_1335f_row4_col8" class="data row4 col8" >0.986472</td>
    </tr>
    <tr>
      <th id="T_1335f_level0_row5" class="row_heading level0 row5" >080010</th>
      <td id="T_1335f_row5_col0" class="data row5 col0" >이상네트웍스</td>
      <td id="T_1335f_row5_col1" class="data row5 col1" >1</td>
      <td id="T_1335f_row5_col2" class="data row5 col2" >7240</td>
      <td id="T_1335f_row5_col3" class="data row5 col3" >7010.000000</td>
      <td id="T_1335f_row5_col4" class="data row5 col4" >7240.000000</td>
      <td id="T_1335f_row5_col5" class="data row5 col5" >0.313522</td>
      <td id="T_1335f_row5_col6" class="data row5 col6" >0.997238</td>
      <td id="T_1335f_row5_col7" class="data row5 col7" >0.985635</td>
      <td id="T_1335f_row5_col8" class="data row5 col8" >0.968232</td>
    </tr>
    <tr>
      <th id="T_1335f_level0_row6" class="row_heading level0 row6" >039010</th>
      <td id="T_1335f_row6_col0" class="data row6 col0" >현대에이치티</td>
      <td id="T_1335f_row6_col1" class="data row6 col1" >1</td>
      <td id="T_1335f_row6_col2" class="data row6 col2" >9450</td>
      <td id="T_1335f_row6_col3" class="data row6 col3" >9330.000000</td>
      <td id="T_1335f_row6_col4" class="data row6 col4" >9450.000000</td>
      <td id="T_1335f_row6_col5" class="data row6 col5" >0.308055</td>
      <td id="T_1335f_row6_col6" class="data row6 col6" >1.023280</td>
      <td id="T_1335f_row6_col7" class="data row6 col7" >1.011852</td>
      <td id="T_1335f_row6_col8" class="data row6 col8" >1.000000</td>
    </tr>
    <tr>
      <th id="T_1335f_level0_row7" class="row_heading level0 row7" >048870</th>
      <td id="T_1335f_row7_col0" class="data row7 col0" >시너지이노베이션</td>
      <td id="T_1335f_row7_col1" class="data row7 col1" >1</td>
      <td id="T_1335f_row7_col2" class="data row7 col2" >3900</td>
      <td id="T_1335f_row7_col3" class="data row7 col3" >3710.000000</td>
      <td id="T_1335f_row7_col4" class="data row7 col4" >3935.000000</td>
      <td id="T_1335f_row7_col5" class="data row7 col5" >0.305030</td>
      <td id="T_1335f_row7_col6" class="data row7 col6" >1.020513</td>
      <td id="T_1335f_row7_col7" class="data row7 col7" >1.009744</td>
      <td id="T_1335f_row7_col8" class="data row7 col8" >0.997436</td>
    </tr>
    <tr>
      <th id="T_1335f_level0_row8" class="row_heading level0 row8" >036690</th>
      <td id="T_1335f_row8_col0" class="data row8 col0" >코맥스</td>
      <td id="T_1335f_row8_col1" class="data row8 col1" >1</td>
      <td id="T_1335f_row8_col2" class="data row8 col2" >4200</td>
      <td id="T_1335f_row8_col3" class="data row8 col3" >4100.000000</td>
      <td id="T_1335f_row8_col4" class="data row8 col4" >4225.000000</td>
      <td id="T_1335f_row8_col5" class="data row8 col5" >0.304738</td>
      <td id="T_1335f_row8_col6" class="data row8 col6" >1.004762</td>
      <td id="T_1335f_row8_col7" class="data row8 col7" >0.993095</td>
      <td id="T_1335f_row8_col8" class="data row8 col8" >0.970238</td>
    </tr>
    <tr>
      <th id="T_1335f_level0_row9" class="row_heading level0 row9" >067570</th>
      <td id="T_1335f_row9_col0" class="data row9 col0" >엔브이에이치코리아</td>
      <td id="T_1335f_row9_col1" class="data row9 col1" >1</td>
      <td id="T_1335f_row9_col2" class="data row9 col2" >4155</td>
      <td id="T_1335f_row9_col3" class="data row9 col3" >3990.000000</td>
      <td id="T_1335f_row9_col4" class="data row9 col4" >4290.000000</td>
      <td id="T_1335f_row9_col5" class="data row9 col5" >0.304414</td>
      <td id="T_1335f_row9_col6" class="data row9 col6" >1.113117</td>
      <td id="T_1335f_row9_col7" class="data row9 col7" >1.049819</td>
      <td id="T_1335f_row9_col8" class="data row9 col8" >1.024067</td>
    </tr>
  </tbody>
</table>
</div></div>
</div>
<p><br> <strong>2022년 5월 25일 - 종목 선정 및 수익률 테스트</strong><br />
SBI핀테크솔류션즈는 전일 종가로 당일 매수가 불가능합니다. 장이 좋을 때는 전일 종가보다 몇 호가 높게 매수하여 매수할 수 있는 종목을 늘리는 것도 고려할 만 합니다. 지더블유바이텍과 아이에스이커머스도 5영업일이내 익절이 가능할 것으로 보입니다.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">select_tops</span> <span class="o">=</span> <span class="n">select_stocks</span><span class="p">(</span><span class="s1">&#39;2022-05-25&#39;</span><span class="p">)</span>

<span class="k">if</span> <span class="n">select_tops</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
    <span class="n">results</span> <span class="o">=</span> <span class="n">outcome_tops</span><span class="p">(</span><span class="n">select_tops</span><span class="p">,</span> <span class="s1">&#39;2022-05-25&#39;</span><span class="p">,</span> <span class="s1">&#39;2022-06-02&#39;</span><span class="p">)</span> <span class="c1"># 5 영업일 (6월 1일 지방선거)          </span>
    
<span class="n">results</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="n">by</span><span class="o">=</span><span class="s1">&#39;buy&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">style</span><span class="o">.</span><span class="n">set_table_attributes</span><span class="p">(</span><span class="s1">&#39;style=&quot;font-size: 12px&quot;&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>2022-02-14 00:00:00 2022-05-25
152
</pre></div>
</div>
<div class="output text_html"><style type="text/css">
</style>
<table id="T_5e2f4_" style="font-size: 12px">
  <thead>
    <tr>
      <th class="blank level0" >&nbsp;</th>
      <th class="col_heading level0 col0" >name</th>
      <th class="col_heading level0 col1" >buy</th>
      <th class="col_heading level0 col2" >buy_price</th>
      <th class="col_heading level0 col3" >buy_low</th>
      <th class="col_heading level0 col4" >buy_high</th>
      <th class="col_heading level0 col5" >yhat</th>
      <th class="col_heading level0 col6" >max_close</th>
      <th class="col_heading level0 col7" >mean_close</th>
      <th class="col_heading level0 col8" >min_close</th>
    </tr>
    <tr>
      <th class="index_name level0" >code</th>
      <th class="blank col0" >&nbsp;</th>
      <th class="blank col1" >&nbsp;</th>
      <th class="blank col2" >&nbsp;</th>
      <th class="blank col3" >&nbsp;</th>
      <th class="blank col4" >&nbsp;</th>
      <th class="blank col5" >&nbsp;</th>
      <th class="blank col6" >&nbsp;</th>
      <th class="blank col7" >&nbsp;</th>
      <th class="blank col8" >&nbsp;</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th id="T_5e2f4_level0_row0" class="row_heading level0 row0" >950110</th>
      <td id="T_5e2f4_row0_col0" class="data row0 col0" >SBI핀테크솔루션즈</td>
      <td id="T_5e2f4_row0_col1" class="data row0 col1" >0</td>
      <td id="T_5e2f4_row0_col2" class="data row0 col2" >4950</td>
      <td id="T_5e2f4_row0_col3" class="data row0 col3" >4960.000000</td>
      <td id="T_5e2f4_row0_col4" class="data row0 col4" >5120.000000</td>
      <td id="T_5e2f4_row0_col5" class="data row0 col5" >0.362305</td>
      <td id="T_5e2f4_row0_col6" class="data row0 col6" >1.052525</td>
      <td id="T_5e2f4_row0_col7" class="data row0 col7" >1.038788</td>
      <td id="T_5e2f4_row0_col8" class="data row0 col8" >1.020202</td>
    </tr>
    <tr>
      <th id="T_5e2f4_level0_row1" class="row_heading level0 row1" >069920</th>
      <td id="T_5e2f4_row1_col0" class="data row1 col0" >아이에스이커머스</td>
      <td id="T_5e2f4_row1_col1" class="data row1 col1" >1</td>
      <td id="T_5e2f4_row1_col2" class="data row1 col2" >6970</td>
      <td id="T_5e2f4_row1_col3" class="data row1 col3" >6960.000000</td>
      <td id="T_5e2f4_row1_col4" class="data row1 col4" >7690.000000</td>
      <td id="T_5e2f4_row1_col5" class="data row1 col5" >0.553528</td>
      <td id="T_5e2f4_row1_col6" class="data row1 col6" >1.070301</td>
      <td id="T_5e2f4_row1_col7" class="data row1 col7" >1.012912</td>
      <td id="T_5e2f4_row1_col8" class="data row1 col8" >0.949785</td>
    </tr>
    <tr>
      <th id="T_5e2f4_level0_row2" class="row_heading level0 row2" >036180</th>
      <td id="T_5e2f4_row2_col0" class="data row2 col0" >지더블유바이텍</td>
      <td id="T_5e2f4_row2_col1" class="data row2 col1" >1</td>
      <td id="T_5e2f4_row2_col2" class="data row2 col2" >887</td>
      <td id="T_5e2f4_row2_col3" class="data row2 col3" >883.000000</td>
      <td id="T_5e2f4_row2_col4" class="data row2 col4" >1045.000000</td>
      <td id="T_5e2f4_row2_col5" class="data row2 col5" >0.413056</td>
      <td id="T_5e2f4_row2_col6" class="data row2 col6" >1.125141</td>
      <td id="T_5e2f4_row2_col7" class="data row2 col7" >1.073506</td>
      <td id="T_5e2f4_row2_col8" class="data row2 col8" >1.024803</td>
    </tr>
    <tr>
      <th id="T_5e2f4_level0_row3" class="row_heading level0 row3" >043710</th>
      <td id="T_5e2f4_row3_col0" class="data row3 col0" >서울리거</td>
      <td id="T_5e2f4_row3_col1" class="data row3 col1" >1</td>
      <td id="T_5e2f4_row3_col2" class="data row3 col2" >1335</td>
      <td id="T_5e2f4_row3_col3" class="data row3 col3" >1285.000000</td>
      <td id="T_5e2f4_row3_col4" class="data row3 col4" >1340.000000</td>
      <td id="T_5e2f4_row3_col5" class="data row3 col5" >0.367892</td>
      <td id="T_5e2f4_row3_col6" class="data row3 col6" >1.011236</td>
      <td id="T_5e2f4_row3_col7" class="data row3 col7" >0.989513</td>
      <td id="T_5e2f4_row3_col8" class="data row3 col8" >0.970037</td>
    </tr>
  </tbody>
</table>
</div></div>
</div>
<p><br> <strong>2022년 6월 2일 - 종목 선정 및 수익률 테스트</strong><br />
모든 종목이 익절이 가능할 것으로 보입니다.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">select_tops</span> <span class="o">=</span> <span class="n">select_stocks</span><span class="p">(</span><span class="s1">&#39;2022-06-02&#39;</span><span class="p">)</span>

<span class="k">if</span> <span class="n">select_tops</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
    <span class="n">results</span> <span class="o">=</span> <span class="n">outcome_tops</span><span class="p">(</span><span class="n">select_tops</span><span class="p">,</span> <span class="s1">&#39;2022-06-02&#39;</span><span class="p">,</span> <span class="s1">&#39;2022-06-10&#39;</span><span class="p">)</span> <span class="c1"># 5 영업일 (6월 6일 현충일)</span>
    
<span class="n">results</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="n">by</span><span class="o">=</span><span class="s1">&#39;buy&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">style</span><span class="o">.</span><span class="n">set_table_attributes</span><span class="p">(</span><span class="s1">&#39;style=&quot;font-size: 12px&quot;&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>2022-02-22 00:00:00 2022-06-02
125
</pre></div>
</div>
<div class="output text_html"><style type="text/css">
</style>
<table id="T_b9f15_" style="font-size: 12px">
  <thead>
    <tr>
      <th class="blank level0" >&nbsp;</th>
      <th class="col_heading level0 col0" >name</th>
      <th class="col_heading level0 col1" >buy</th>
      <th class="col_heading level0 col2" >buy_price</th>
      <th class="col_heading level0 col3" >buy_low</th>
      <th class="col_heading level0 col4" >buy_high</th>
      <th class="col_heading level0 col5" >yhat</th>
      <th class="col_heading level0 col6" >max_close</th>
      <th class="col_heading level0 col7" >mean_close</th>
      <th class="col_heading level0 col8" >min_close</th>
    </tr>
    <tr>
      <th class="index_name level0" >code</th>
      <th class="blank col0" >&nbsp;</th>
      <th class="blank col1" >&nbsp;</th>
      <th class="blank col2" >&nbsp;</th>
      <th class="blank col3" >&nbsp;</th>
      <th class="blank col4" >&nbsp;</th>
      <th class="blank col5" >&nbsp;</th>
      <th class="blank col6" >&nbsp;</th>
      <th class="blank col7" >&nbsp;</th>
      <th class="blank col8" >&nbsp;</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th id="T_b9f15_level0_row0" class="row_heading level0 row0" >069920</th>
      <td id="T_b9f15_row0_col0" class="data row0 col0" >아이에스이커머스</td>
      <td id="T_b9f15_row0_col1" class="data row0 col1" >1</td>
      <td id="T_b9f15_row0_col2" class="data row0 col2" >7410</td>
      <td id="T_b9f15_row0_col3" class="data row0 col3" >7270.000000</td>
      <td id="T_b9f15_row0_col4" class="data row0 col4" >7720.000000</td>
      <td id="T_b9f15_row0_col5" class="data row0 col5" >0.419160</td>
      <td id="T_b9f15_row0_col6" class="data row0 col6" >1.075574</td>
      <td id="T_b9f15_row0_col7" class="data row0 col7" >1.005938</td>
      <td id="T_b9f15_row0_col8" class="data row0 col8" >0.960864</td>
    </tr>
    <tr>
      <th id="T_b9f15_level0_row1" class="row_heading level0 row1" >021880</th>
      <td id="T_b9f15_row1_col0" class="data row1 col0" >메이슨캐피탈</td>
      <td id="T_b9f15_row1_col1" class="data row1 col1" >1</td>
      <td id="T_b9f15_row1_col2" class="data row1 col2" >668</td>
      <td id="T_b9f15_row1_col3" class="data row1 col3" >652.000000</td>
      <td id="T_b9f15_row1_col4" class="data row1 col4" >685.000000</td>
      <td id="T_b9f15_row1_col5" class="data row1 col5" >0.322701</td>
      <td id="T_b9f15_row1_col6" class="data row1 col6" >1.157186</td>
      <td id="T_b9f15_row1_col7" class="data row1 col7" >1.086826</td>
      <td id="T_b9f15_row1_col8" class="data row1 col8" >1.016467</td>
    </tr>
    <tr>
      <th id="T_b9f15_level0_row2" class="row_heading level0 row2" >014200</th>
      <td id="T_b9f15_row2_col0" class="data row2 col0" >광림</td>
      <td id="T_b9f15_row2_col1" class="data row2 col1" >1</td>
      <td id="T_b9f15_row2_col2" class="data row2 col2" >2100</td>
      <td id="T_b9f15_row2_col3" class="data row2 col3" >2040.000000</td>
      <td id="T_b9f15_row2_col4" class="data row2 col4" >2185.000000</td>
      <td id="T_b9f15_row2_col5" class="data row2 col5" >0.308382</td>
      <td id="T_b9f15_row2_col6" class="data row2 col6" >1.221429</td>
      <td id="T_b9f15_row2_col7" class="data row2 col7" >1.034762</td>
      <td id="T_b9f15_row2_col8" class="data row2 col8" >0.938095</td>
    </tr>
  </tbody>
</table>
</div></div>
</div>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            kernelName: "python3",
            path: "./chapter6"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

              </div>
              
            </main>
            <footer class="footer-article noprint">
                
    <!-- Previous / next buttons -->
<div class='prev-next-area'>
    <a class='left-prev' id="prev-link" href="6.1.1_Stock_Selection.html" title="previous page">
        <i class="fas fa-angle-left"></i>
        <div class="prev-next-info">
            <p class="prev-next-subtitle">previous</p>
            <p class="prev-next-title">종목 추천 프로세스</p>
        </div>
    </a>
    <a class='right-next' id="next-link" href="6.2.1_Profit_Loss_Sell.html" title="next page">
    <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">익절/손절 라인</p>
    </div>
    <i class="fas fa-angle-right"></i>
    </a>
</div>
            </footer>
        </div>
    </div>
    <div class="footer-content row">
        <footer class="col footer"><p>
  
    By KHS<br/>
  
      &copy; Copyright 2022.<br/>
</p>
        </footer>
    </div>
    
</div>


      </div>
    </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../_static/scripts/pydata-sphinx-theme.js?digest=1999514e3f237ded88cf"></script>


  </body>
</html>